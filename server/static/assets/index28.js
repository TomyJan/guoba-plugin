var e=(e,t,i)=>new Promise(((s,n)=>{var a=e=>{try{r(i.next(e))}catch(t){n(t)}},l=e=>{try{r(i.throw(e))}catch(t){n(t)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,l);r((i=i.apply(e,t)).next())}));import{b as t,U as i,r as s,c as n,eD as a,I as l,cZ as r,e as o,o as u,f as p,i as m,s as d,f_ as c,k as f,j as v,v as g,m as j,c5 as x,W as y}from"./index.js";import{P as _}from"./index13.js";import{_ as k}from"./Exception.vue_vue_type_style_index_0_lang.js";import{u as h}from"./index25.js";import{P,G as b}from"./GPluginModal.js";import{a as w}from"./index2.js";import{_ as E}from"./PluginIcon.js";import"./index15.js";import"./onMountedOrActivated.js";import"./useWindowSizeFn.js";import"./useContentViewHeight.js";import"./ArrowLeftOutlined.js";import"./transButton.js";import"./index14.js";import"./MarkdownViewer.js";import"./guoba.js";import"./BasicForm.js";import"./index4.js";import"./index5.js";import"./useFormItem.js";import"./index3.js";import"./DeleteOutlined.js";import"./upperFirst.js";import"./download.js";import"./index6.js";import"./index7.js";import"./uniqBy.js";import"./common.js";import"./FullscreenOutlined.js";const O={key:1},C={class:"plugin-title"},F=["href"],R={class:"plugin-content"},T={class:"content-desc"},A=g("span",null,"保存",-1),D={style:{"text-align":"center"}},G=g("span",null,"保存",-1),M=t({__name:"index",setup(t){const{prefixCls:M}=i("plugin-detail"),z=h(),B=s(),I=s(!0),N=s(!0),U=n({isError:!1,status:a.PAGE_NOT_FOUND,title:"404",message:"未找到该插件"}),V=l((()=>{var e,t;return null!=(t=null==(e=r.currentRoute.value.params)?void 0:e.name)?t:""})),W=s();function q(){return e(this,null,(function*(){try{I.value=!0,yield B.value.savePluginConfigData()}finally{I.value=!1}}))}!function(){e(this,null,(function*(){try{if(!V.value)return U.isError=!0,U.title="非法的插件名",U.message="遇到该问题请刷新页面重试！",void(U.status=a.ERROR);const e=(yield z.getPlugins()).find((e=>e.name===V.value));if(!e)return U.isError=!0,U.title="插件不存在",void(U.message=" ");if(!e.installed)return U.isError=!0,U.status=a.PAGE_NOT_DATA,U.title="插件未安装",void(U.message=" ");W.value=e}finally{N.value=!1,I.value=!1}}))}();const[H,{openModal:L}]=w();function S(){L(!0,{plugin:W.value})}return(e,t)=>{const i=o("a-col"),s=o("a-button"),n=o("a-row"),a=o("a-card");return u(),p("div",{class:y([d(M)])},[N.value?(u(),m(d(c),{key:0,active:""})):U.isError?(u(),p("div",O,[f(d(k),{status:U.status,title:U.title,subTitle:U.message,btnText:"返回插件管理",goPath:"/plugins"},null,8,["status","title","subTitle"])])):(u(),m(d(_),{key:2,loading:I.value,sticky:"",stickyTop:"-50px"},{title:v((()=>[g("div",C,[f(E,{plugin:W.value,size:24},null,8,["plugin"]),g("a",{class:"title-name",onClick:S},j(W.value.title),1),g("a",{href:W.value.link,target:"_blank",style:{"margin-left":"4px"}},[f(d(x),{icon:"bx:link",style:{"font-size":"20px"}})],8,F)])])),headerContent:v((()=>[g("div",R,[g("div",T,j(W.value.description),1)])])),footer:v((()=>[f(n,null,{default:v((()=>[f(i,{span:12}),f(i,{span:12,style:{"text-align":"right","padding-bottom":"8px"}},{default:v((()=>[f(s,{type:"primary","pre-icon":"ant-design:save",onClick:q},{default:v((()=>[A])),_:1})])),_:1})])),_:1})])),default:v((()=>[f(n,{justify:"center"},{default:v((()=>[f(i,{xxl:16,xl:18,lg:20,md:22,sm:24,xs:24},{default:v((()=>[f(a,null,{default:v((()=>[f(P,{ref_key:"configFormRef",ref:B,plugin:W.value},null,8,["plugin"]),g("div",D,[f(s,{type:"primary","pre-icon":"ant-design:save",onClick:q},{default:v((()=>[G])),_:1})])])),_:1})])),_:1})])),_:1}),f(b,{onRegister:d(H)},null,8,["onRegister"])])),_:1},8,["loading"]))],2)}}});export{M as default};
