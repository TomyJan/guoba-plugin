var e=(e,t,s)=>new Promise(((i,a)=>{var l=e=>{try{o(s.next(e))}catch(t){a(t)}},n=e=>{try{o(s.throw(e))}catch(t){a(t)}},o=e=>e.done?i(e.value):Promise.resolve(e.value).then(l,n);o((s=s.apply(e,t)).next())}));import{b as t,U as s,r as i,c as a,eE as l,I as n,c_ as o,e as r,o as u,f as p,i as d,s as m,f$ as v,k as c,j as f,v as g,m as x,c5 as y,F as j,h as _,V as h,W as k}from"./index.js";import{P as b}from"./index13.js";import{_ as P}from"./Exception.vue_vue_type_style_index_0_lang.js";import{u as w}from"./index25.js";import{P as E,G}from"./GPluginModal.js";import{a as F}from"./index2.js";import{_ as O}from"./PluginIcon.js";import"./index15.js";import"./onMountedOrActivated.js";import"./useWindowSizeFn.js";import"./useContentViewHeight.js";import"./ArrowLeftOutlined.js";import"./transButton.js";import"./index14.js";import"./MarkdownViewer.js";import"./guoba.js";import"./BasicForm.js";import"./index4.js";import"./index5.js";import"./useFormItem.js";import"./index3.js";import"./DeleteOutlined.js";import"./upperFirst.js";import"./download.js";import"./index6.js";import"./index7.js";import"./uniqBy.js";import"./lodash.default.js";import"./throttle.js";import"./merge.js";import"./common.js";import"./FullscreenOutlined.js";const C={key:1},R={class:"plugin-title"},T=["href"],A={class:"plugin-content"},K={class:"content-desc ellipsis"},U={class:"ellipsis",style:{"max-width":"120px"}},D=g("span",null,"保存",-1),L={style:{"text-align":"center"}},M=g("span",null,"保存",-1),z=t({__name:"index",setup(t){const{prefixCls:z}=s("plugin-detail"),B=w(),I=i(),N=i(!0),V=i(!0),W=a({isError:!1,status:l.PAGE_NOT_FOUND,title:"404",message:"未找到该插件"}),q=n((()=>{var e,t;return null!=(t=null==(e=o.currentRoute.value.params)?void 0:e.name)?t:""})),H=i();!function(){e(this,null,(function*(){try{if(!q.value)return W.isError=!0,W.title="非法的插件名",W.message="遇到该问题请刷新页面重试！",void(W.status=l.ERROR);const e=(yield B.getPlugins()).find((e=>e.name===q.value));if(!e)return W.isError=!0,W.title="插件不存在",void(W.message=" ");if(!e.installed)return W.isError=!0,W.status=l.PAGE_NOT_DATA,W.title="插件未安装",void(W.message=" ");H.value=e}finally{V.value=!1,N.value=!1}}))}();const S=i("default"),$=i([]);function J(){return e(this,null,(function*(){try{N.value=!0,yield I.value.savePluginConfigData()}finally{N.value=!1}}))}const[Q,{openModal:X}]=F();function Y(){X(!0,{plugin:H.value})}return(e,t)=>{const s=r("a-tab-pane"),i=r("a-tabs"),a=r("a-col"),l=r("a-button"),n=r("a-row"),o=r("a-card");return u(),p("div",{class:k([m(z)])},[V.value?(u(),d(m(v),{key:0,active:""})):W.isError?(u(),p("div",C,[c(m(P),{status:W.status,title:W.title,subTitle:W.message,btnText:"返回插件管理",goPath:"/plugins"},null,8,["status","title","subTitle"])])):(u(),d(m(b),{key:2,loading:N.value,sticky:"",stickyTop:"-50px"},{title:f((()=>[g("div",R,[c(O,{plugin:H.value,size:24},null,8,["plugin"]),g("a",{class:"title-name",onClick:Y},x(H.value.title),1),g("a",{href:H.value.link,target:"_blank",style:{"margin-left":"4px"}},[c(m(y),{icon:"bx:link",style:{"font-size":"20px"}})],8,T)])])),headerContent:f((()=>[g("div",A,[g("div",K,x(H.value.description),1)])])),footer:f((()=>[c(n,null,{default:f((()=>[c(a,{xxl:22,xl:22,lg:20,md:20,sm:19,xs:17},{default:f((()=>[$.value.length>0?(u(),d(i,{key:0,activeKey:S.value,"onUpdate:activeKey":t[0]||(t[0]=e=>S.value=e)},{default:f((()=>[(u(!0),p(j,null,_($.value,(e=>(u(),d(s,{key:e.name},{tab:f((()=>[g("div",U,x(e.title),1)])),_:2},1024)))),128))])),_:1},8,["activeKey"])):h("",!0)])),_:1}),c(a,{xxl:2,xl:2,lg:4,md:4,sm:5,xs:7,style:{"text-align":"right","padding-bottom":"8px"}},{default:f((()=>[c(l,{type:"primary","pre-icon":"ant-design:save",onClick:J},{default:f((()=>[D])),_:1})])),_:1})])),_:1})])),default:f((()=>[c(n,{justify:"center"},{default:f((()=>[c(a,{xxl:16,xl:18,lg:20,md:22,sm:24,xs:24},{default:f((()=>[c(o,null,{default:f((()=>[c(E,{ref_key:"configFormRef",ref:I,"soft-grouping":"",activeGroupKey:S.value,"onUpdate:activeGroupKey":t[1]||(t[1]=e=>S.value=e),softGroupList:$.value,"onUpdate:softGroupList":t[2]||(t[2]=e=>$.value=e),plugin:H.value},null,8,["activeGroupKey","softGroupList","plugin"]),g("div",L,[c(l,{type:"primary","pre-icon":"ant-design:save",onClick:J},{default:f((()=>[M])),_:1})])])),_:1})])),_:1})])),_:1}),c(G,{onRegister:m(Q)},null,8,["onRegister"])])),_:1},8,["loading"]))],2)}}});export{z as default};
