var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(t,o,r)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,i=(e,t)=>{for(var o in t||(t={}))s.call(t,o)&&n(e,o,t[o]);if(r)for(var o of r(t))l.call(t,o)&&n(e,o,t[o]);return e},a=(e,r)=>t(e,o(r));import{B as d}from"./TableImg.js";import"./BasicForm.js";import{b as c,g7 as m,p as u,B as p,r as g,cX as f,s as x,g8 as b,x as h,k as j,e as w,a as S,o as y,i as C,j as v,X as O,v as R,V as I}from"./index.js";import{B as _,u as P}from"./index2.js";import{s as B,u as k}from"./useSelectModal.js";import"./index3.js";import"./index13.js";import"./index15.js";import"./onMountedOrActivated.js";import"./useWindowSizeFn.js";import"./useContentViewHeight.js";import"./ArrowLeftOutlined.js";import"./transButton.js";import"./index4.js";import"./index5.js";import"./merge.js";import"./upperFirst.js";import"./sortable.esm.js";import"./RedoOutlined.js";import"./FullscreenOutlined.js";import"./scrollTo.js";import"./index20.js";import"./index21.js";import"./useFormItem.js";import"./DeleteOutlined.js";import"./download.js";import"./index6.js";import"./index7.js";import"./uniqBy.js";function F(e){return h.get({url:"/oicq/group/list",params:e})}var T=c({name:"SelectGroupModal",components:{BasicModal:_,BasicTable:d,FormItemRest:m},props:a(i({},B),{modalTitle:u.string.def("选择群")}),emits:["register","getSelectResult"],setup(e,{emit:t}){const o=p(),r=g(),s=f(),l=Object.assign({},x(e),x(o),{canResize:!1,bordered:!0,size:"small"}),[{rowSelection:n,visibleChange:d,selectValues:c,indexColumnProps:m,getSelectResult:u,handleDeleteSelected:h,selectRows:S}]=k(F,l),y=g({x:!1}),[C,{closeModal:v}]=P((()=>{return e=this,t=null,o=function*(){window.innerWidth<900?y.value={x:900}:y.value={x:!1},yield b(r),r.value.setSelectedRowKeys(c.value||[])},new Promise(((r,s)=>{var l=e=>{try{i(o.next(e))}catch(t){s(t)}},n=e=>{try{i(o.throw(e))}catch(t){s(t)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,n);i((o=o.apply(e,t)).next())}));var e,t,o})),O=[{title:"头像",dataIndex:"group_id",width:60,customRender:({text:e})=>j(w("g-avatar"),{id:e,type:"group",qs:100},null)},{title:"群号",dataIndex:"group_id",width:120},{title:"群名",dataIndex:"group_name",ellipsis:!0,align:"left",customRender({text:e,record:t}){if(t.remark!==e){const o=t.owner_id===s.getUserInfo.userId,r=t.admin_flag,l=o?"（群主）":r?"（管理员）":"";return j("span",null,[j("span",null,[e]),j("span",{style:"color:#999;font-size:8px;"},[l])])}return e}},{title:"活跃人数",dataIndex:"active_member_count",width:80,customRender:({text:e})=>(null!=e?e:0)+"人"},{title:"总人数",dataIndex:"member_count",width:80,customRender:({text:e})=>(null!=e?e:0)+"人"}];return{handleOk:function(){u(((e,o)=>{t("getSelectResult",e,o),v()}))},searchInfo:g(e.params),register:C,indexColumnProps:m,visibleChange:d,getBindValue:l,getGroupList:F,formConfig:{baseColProps:{xs:24,sm:8,md:6,lg:8,xl:8,xxl:8},actionColOptions:{xs:24,sm:8,md:8,lg:8,xl:8,xxl:8,style:{paddingLeft:"8px",textAlign:"left"}},labelCol:{xs:24,sm:6},wrapperCol:{xs:24,sm:18},schemas:[{label:"群号",field:"query_group_id",component:"Input",componentProps:{placeholder:"请输入群号"}},{label:"群名称",field:"query_name",component:"Input",componentProps:{placeholder:"请输入群名称"}}],autoSubmitOnEnter:!0},columns:O,rowSelection:n,selectRows:S,selectedTable:{rowKey:"group_id",size:"small",bordered:!0,scroll:{y:390},canResize:!1,pagination:!1,showIndexColumn:!1,columns:[O[0],a(i({},O[1]),{show:!1}),O[2]]},handleDeleteSelected:h,tableScroll:y,tableRef:r}}});const V=["onClick"];var z=S(T,[["render",function(e,t,o,r,s,l){const n=w("BasicTable"),i=w("a-col"),a=w("Icon"),d=w("a-row"),c=w("BasicModal"),m=w("FormItemRest");return y(),C(m,null,{default:v((()=>[j(c,O({width:"800px",title:e.modalTitle,onOk:e.handleOk,onRegister:e.register,onVisibleChange:e.visibleChange},e.$attrs),{default:v((()=>[j(d,null,{default:v((()=>[j(i,{span:e.showSelected?18:24},{default:v((()=>[j(n,O({ref:"tableRef",columns:e.columns,scroll:e.tableScroll},e.getBindValue,{useSearchForm:!0,formConfig:e.formConfig,api:e.getGroupList,searchInfo:e.searchInfo,rowSelection:e.rowSelection,indexColumnProps:e.indexColumnProps}),null,16,["columns","scroll","formConfig","api","searchInfo","rowSelection","indexColumnProps"])])),_:1},8,["span"]),e.showSelected?(y(),C(i,{key:0,span:6},{default:v((()=>[j(n,O(e.selectedTable,{dataSource:e.selectRows,useSearchForm:!0,formConfig:{showActionButtonGroup:!1,baseRowStyle:{minHeight:"40px"}}}),{action:v((({record:t})=>[R("a",{onClick:o=>e.handleDeleteSelected(t)},[j(a,{icon:"ant-design:delete-outlined"})],8,V)])),_:1},16,["dataSource"])])),_:1})):I("",!0)])),_:1})])),_:1},16,["title","onOk","onRegister","onVisibleChange"])])),_:1})}]]);export{z as default};
